<?php

namespace Database\Seeders;

use Illuminate\Database\Seeder;
use App\Models\Schedule;
use Illuminate\Database\Eloquent\Model;

class ImportSchedulesCsvSeeder extends Seeder
{
    public function run(): void
    {
        Model::unguard();

        // Tu CSV con las cabeceras implicitas:
        // ID, Nombre, Dia, Entrada, Salida, MinutosLaborales, Tolerancia
        $csvData = <<<EOT
152,"T11-10","Lunes","08:30:00","14:30:00",360,10
152,"T11-10","Martes","08:30:00","14:30:00",360,10
152,"T11-10","Miercoles","08:30:00","14:30:00",360,10
152,"T11-10","Jueves","08:30:00","14:30:00",360,10
152,"T11-10","Viernes","08:30:00","14:30:00",360,10
112,"T12","Lunes","09:00:00","18:00:00",540,15
112,"T12","Martes","09:00:00","18:00:00",540,15
112,"T12","Miercoles","09:00:00","18:00:00",540,15
112,"T12","Jueves","09:00:00","18:00:00",540,15
112,"T12","Viernes","09:00:00","18:00:00",540,15
113,"T15","Lunes","09:00:00","17:00:00",480,15
113,"T15","Martes","09:00:00","17:00:00",480,15
113,"T15","Miercoles","09:00:00","17:00:00",480,15
113,"T15","Jueves","09:00:00","17:00:00",480,15
113,"T15","Viernes","09:00:00","17:00:00",480,15
114,"T17-10","Lunes","09:00:00","16:00:00",420,10
114,"T17-10","Martes","09:00:00","16:00:00",420,10
114,"T17-10","Miercoles","09:00:00","16:00:00",420,10
114,"T17-10","Jueves","09:00:00","16:00:00",420,10
114,"T17-10","Viernes","09:00:00","16:00:00",420,10
115,"T17-15","Lunes","09:00:00","16:00:00",420,15
115,"T17-15","Martes","09:00:00","16:00:00",420,15
115,"T17-15","Miercoles","09:00:00","16:00:00",420,15
115,"T17-15","Jueves","09:00:00","16:00:00",420,15
115,"T17-15","Viernes","09:00:00","16:00:00",420,15
116,"T19-10","Lunes","09:00:00","15:00:00",360,10
116,"T19-10","Martes","09:00:00","15:00:00",360,10
116,"T19-10","Miercoles","09:00:00","15:00:00",360,10
116,"T19-10","Jueves","09:00:00","15:00:00",360,10
116,"T19-10","Viernes","09:00:00","15:00:00",360,10
117,"T19-15","Lunes","09:00:00","15:00:00",360,15
117,"T19-15","Martes","09:00:00","15:00:00",360,15
117,"T19-15","Miercoles","09:00:00","15:00:00",360,15
117,"T19-15","Jueves","09:00:00","15:00:00",360,15
117,"T19-15","Viernes","09:00:00","15:00:00",360,15
118,"T20-10","Lunes","08:30:00","15:30:00",420,10
118,"T20-10","Martes","08:30:00","15:30:00",420,10
118,"T20-10","Miercoles","08:30:00","15:30:00",420,10
118,"T20-10","Jueves","08:30:00","15:30:00",420,10
118,"T20-10","Viernes","08:30:00","15:30:00",420,10
119,"T20-15","Lunes","08:30:00","15:30:00",420,15
119,"T20-15","Martes","08:30:00","15:30:00",420,15
119,"T20-15","Miercoles","08:30:00","15:30:00",420,15
119,"T20-15","Jueves","08:30:00","15:30:00",420,15
119,"T20-15","Viernes","08:30:00","15:30:00",420,15
120,"T22-10","Domingo","08:00:00","20:00:00",720,10
120,"T22-10","Sábado","08:00:00","20:00:00",720,10
121,"T22-15","Domingo","08:00:00","20:00:00",720,15
121,"T22-15","Sábado","08:00:00","20:00:00",720,15
122,"T25","Lunes","08:00:00","17:00:00",540,15
122,"T25","Martes","08:00:00","17:00:00",540,15
122,"T25","Miercoles","08:00:00","17:00:00",540,15
122,"T25","Jueves","08:00:00","17:00:00",540,15
122,"T25","Viernes","08:00:00","17:00:00",540,15
123,"T26","Lunes","08:00:00","16:00:00",480,15
123,"T26","Martes","08:00:00","16:00:00",480,15
123,"T26","Miercoles","08:00:00","16:00:00",480,15
123,"T26","Jueves","08:00:00","16:00:00",480,15
123,"T26","Viernes","08:00:00","16:00:00",480,15
124,"T27-10","Lunes","08:00:00","15:00:00",420,10
124,"T27-10","Martes","08:00:00","15:00:00",420,10
124,"T27-10","Miercoles","08:00:00","15:00:00",420,10
124,"T27-10","Jueves","08:00:00","15:00:00",420,10
124,"T27-10","Viernes","08:00:00","15:00:00",420,10
125,"T27-15","Lunes","08:00:00","15:00:00",420,15
125,"T27-15","Martes","08:00:00","15:00:00",420,15
125,"T27-15","Miercoles","08:00:00","15:00:00",420,15
125,"T27-15","Jueves","08:00:00","15:00:00",420,15
125,"T27-15","Viernes","08:00:00","15:00:00",420,15
126,"T28","Lunes","08:00:00","14:00:00",360,15
126,"T28","Martes","08:00:00","14:00:00",360,15
126,"T28","Miercoles","08:00:00","14:00:00",360,15
126,"T28","Jueves","08:00:00","14:00:00",360,15
126,"T28","Viernes","08:00:00","14:00:00",360,15
161,"T28-10","Lunes","08:00:00","14:00:00",360,-1
161,"T28-10","Martes","08:00:00","14:00:00",360,-1
161,"T28-10","Miercoles","08:00:00","14:00:00",360,-1
161,"T28-10","Jueves","08:00:00","14:00:00",360,-1
161,"T28-10","Viernes","08:00:00","14:00:00",360,-1
127,"T32","Lunes","07:30:00","14:30:00",420,10
127,"T32","Martes","07:30:00","14:30:00",420,10
127,"T32","Miercoles","07:30:00","14:30:00",420,10
127,"T32","Jueves","07:30:00","14:30:00",420,10
127,"T32","Viernes","07:30:00","14:30:00",420,10
128,"T33-10","Lunes","07:00:00","15:00:00",480,10
128,"T33-10","Martes","07:00:00","15:00:00",480,10
128,"T33-10","Miercoles","07:00:00","15:00:00",480,10
128,"T33-10","Jueves","07:00:00","15:00:00",480,10
128,"T33-10","Viernes","07:00:00","15:00:00",480,10
129,"T33-15","Lunes","07:00:00","15:00:00",480,15
129,"T33-15","Martes","07:00:00","15:00:00",480,15
129,"T33-15","Miercoles","07:00:00","15:00:00",480,15
129,"T33-15","Jueves","07:00:00","15:00:00",480,15
129,"T33-15","Viernes","07:00:00","15:00:00",480,15
130,"T34-10","Lunes","07:00:00","14:00:00",420,10
130,"T34-10","Martes","07:00:00","14:00:00",420,10
130,"T34-10","Miercoles","07:00:00","14:00:00",420,10
130,"T34-10","Jueves","07:00:00","14:00:00",420,10
130,"T34-10","Viernes","07:00:00","14:00:00",420,10
131,"T34-15","Lunes","07:00:00","14:00:00",420,15
131,"T34-15","Martes","07:00:00","14:00:00",420,15
131,"T34-15","Miercoles","07:00:00","14:00:00",420,15
131,"T34-15","Jueves","07:00:00","14:00:00",420,15
131,"T34-15","Viernes","07:00:00","14:00:00",420,15
132,"T36","Lunes","16:00:00","22:00:00",360,10
132,"T36","Martes","16:00:00","22:00:00",360,10
132,"T36","Miercoles","16:00:00","22:00:00",360,10
132,"T36","Jueves","16:00:00","22:00:00",360,10
132,"T36","Viernes","16:00:00","22:00:00",360,10
133,"T39-10","Lunes","15:00:00","22:00:00",420,10
133,"T39-10","Martes","15:00:00","22:00:00",420,10
133,"T39-10","Miercoles","15:00:00","22:00:00",420,10
133,"T39-10","Jueves","15:00:00","22:00:00",420,10
133,"T39-10","Viernes","15:00:00","22:00:00",420,10
134,"T39-15","Lunes","15:00:00","22:00:00",420,15
134,"T39-15","Martes","15:00:00","22:00:00",420,15
134,"T39-15","Miercoles","15:00:00","22:00:00",420,15
134,"T39-15","Jueves","15:00:00","22:00:00",420,15
134,"T39-15","Viernes","15:00:00","22:00:00",420,15
109,"T4-10","Lunes","09:30:00","16:30:00",420,10
109,"T4-10","Martes","09:30:00","16:30:00",420,10
109,"T4-10","Miercoles","09:30:00","16:30:00",420,10
109,"T4-10","Jueves","09:30:00","16:30:00",420,10
109,"T4-10","Viernes","09:30:00","16:30:00",420,10
110,"T4-15","Lunes","09:30:00","16:30:00",420,15
110,"T4-15","Martes","09:30:00","16:30:00",420,15
110,"T4-15","Miercoles","09:30:00","16:30:00",420,15
110,"T4-15","Jueves","09:30:00","16:30:00",420,15
110,"T4-15","Viernes","09:30:00","16:30:00",420,15
135,"T40-10","Lunes","15:00:00","21:00:00",360,10
135,"T40-10","Martes","15:00:00","21:00:00",360,10
135,"T40-10","Miercoles","15:00:00","21:00:00",360,10
135,"T40-10","Jueves","15:00:00","21:00:00",360,10
135,"T40-10","Viernes","15:00:00","21:00:00",360,10
136,"T40-15","Lunes","15:00:00","21:00:00",360,15
136,"T40-15","Martes","15:00:00","21:00:00",360,15
136,"T40-15","Miercoles","15:00:00","21:00:00",360,15
136,"T40-15","Jueves","15:00:00","21:00:00",360,15
136,"T40-15","Viernes","15:00:00","21:00:00",360,15
137,"T42","Lunes","14:00:00","22:00:00",480,15
137,"T42","Martes","14:00:00","22:00:00",480,15
137,"T42","Miercoles","14:00:00","22:00:00",480,15
137,"T42","Jueves","14:00:00","22:00:00",480,15
137,"T42","Viernes","14:00:00","22:00:00",480,15
138,"T43-10","Lunes","14:00:00","21:00:00",420,10
138,"T43-10","Martes","14:00:00","21:00:00",420,10
138,"T43-10","Miercoles","14:00:00","21:00:00",420,10
138,"T43-10","Jueves","14:00:00","21:00:00",420,10
138,"T43-10","Viernes","14:00:00","21:00:00",420,10
139,"T43-15","Lunes","14:00:00","21:00:00",420,15
139,"T43-15","Martes","14:00:00","21:00:00",420,15
139,"T43-15","Miercoles","14:00:00","21:00:00",420,15
139,"T43-15","Jueves","14:00:00","21:00:00",420,15
139,"T43-15","Viernes","14:00:00","21:00:00",420,15
140,"T46","Lunes","13:00:00","21:00:00",480,15
140,"T46","Martes","13:00:00","21:00:00",480,15
140,"T46","Miercoles","13:00:00","21:00:00",480,15
140,"T46","Jueves","13:00:00","21:00:00",480,15
140,"T46","Viernes","13:00:00","21:00:00",480,15
141,"T47-10","Lunes","13:00:00","20:00:00",420,10
141,"T47-10","Martes","13:00:00","20:00:00",420,10
141,"T47-10","Miercoles","13:00:00","20:00:00",420,10
141,"T47-10","Jueves","13:00:00","20:00:00",420,10
141,"T47-10","Viernes","13:00:00","20:00:00",420,10
142,"T47-15","Lunes","13:00:00","20:00:00",420,15
142,"T47-15","Martes","13:00:00","20:00:00",420,15
142,"T47-15","Miercoles","13:00:00","20:00:00",420,15
142,"T47-15","Jueves","13:00:00","20:00:00",420,15
142,"T47-15","Viernes","13:00:00","20:00:00",420,15
143,"T50","Lunes","12:00:00","20:00:00",480,15
143,"T50","Martes","12:00:00","20:00:00",480,15
143,"T50","Miercoles","12:00:00","20:00:00",480,15
143,"T50","Jueves","12:00:00","20:00:00",480,15
143,"T50","Viernes","12:00:00","20:00:00",480,15
144,"T51","Lunes","12:00:00","19:00:00",420,10
144,"T51","Martes","12:00:00","19:00:00",420,10
144,"T51","Miercoles","12:00:00","19:00:00",420,10
144,"T51","Jueves","12:00:00","19:00:00",420,10
144,"T51","Viernes","12:00:00","19:00:00",420,10
145,"T54","Lunes","11:00:00","19:00:00",480,15
145,"T54","Martes","11:00:00","19:00:00",480,15
145,"T54","Miercoles","11:00:00","19:00:00",480,15
145,"T54","Jueves","11:00:00","19:00:00",480,15
145,"T54","Viernes","11:00:00","19:00:00",480,15
146,"T55-10","Lunes","11:00:00","18:00:00",420,10
146,"T55-10","Martes","11:00:00","18:00:00",420,10
146,"T55-10","Miercoles","11:00:00","18:00:00",420,10
146,"T55-10","Jueves","11:00:00","18:00:00",420,10
146,"T55-10","Viernes","11:00:00","18:00:00",420,10
147,"T55-15","Lunes","11:00:00","18:00:00",420,15
147,"T55-15","Martes","11:00:00","18:00:00",420,15
147,"T55-15","Miercoles","11:00:00","18:00:00",420,15
147,"T55-15","Jueves","11:00:00","18:00:00",420,15
147,"T55-15","Viernes","11:00:00","18:00:00",420,15
148,"T57","Lunes","10:30:00","17:30:00",420,10
148,"T57","Martes","10:30:00","17:30:00",420,10
148,"T57","Miercoles","10:30:00","17:30:00",420,10
148,"T57","Jueves","10:30:00","17:30:00",420,10
148,"T57","Viernes","10:30:00","17:30:00",420,10
149,"T58","Lunes","10:00:00","18:00:00",480,15
149,"T58","Martes","10:00:00","18:00:00",480,15
149,"T58","Miercoles","10:00:00","18:00:00",480,15
149,"T58","Jueves","10:00:00","18:00:00",480,15
149,"T58","Viernes","10:00:00","18:00:00",480,15
150,"T59-10","Lunes","10:00:00","17:00:00",420,10
150,"T59-10","Martes","10:00:00","17:00:00",420,10
150,"T59-10","Miercoles","10:00:00","17:00:00",420,10
150,"T59-10","Jueves","10:00:00","17:00:00",420,10
150,"T59-10","Viernes","10:00:00","17:00:00",420,10
151,"T59-15","Lunes","10:00:00","17:00:00",420,15
151,"T59-15","Martes","10:00:00","17:00:00",420,15
151,"T59-15","Miercoles","10:00:00","17:00:00",420,15
151,"T59-15","Jueves","10:00:00","17:00:00",420,15
151,"T59-15","Viernes","10:00:00","17:00:00",420,15
156,"T60-15","Lunes","09:30:00","17:30:00",480,-1
156,"T60-15","Martes","09:30:00","17:30:00",480,-1
156,"T60-15","Miercoles","09:30:00","17:30:00",480,-1
156,"T60-15","Jueves","09:30:00","17:30:00",480,-1
156,"T60-15","Viernes","09:30:00","17:30:00",480,-1
157,"T61-10","Lunes","07:00:00","13:00:00",360,-1
157,"T61-10","Martes","07:00:00","13:00:00",360,-1
157,"T61-10","Miercoles","07:00:00","13:00:00",360,-1
157,"T61-10","Jueves","07:00:00","13:00:00",360,-1
157,"T61-10","Viernes","07:00:00","13:00:00",360,-1
158,"T62-10","Lunes","08:30:00","14:30:00",360,-1
158,"T62-10","Martes","08:30:00","14:30:00",360,-1
158,"T62-10","Miercoles","08:30:00","14:30:00",360,-1
158,"T62-10","Jueves","08:30:00","14:30:00",360,-1
158,"T62-10","Viernes","08:30:00","14:30:00",360,-1
159,"T63-15","Lunes","12:00:00","19:00:00",420,-1
159,"T63-15","Martes","12:00:00","19:00:00",420,-1
159,"T63-15","Miercoles","12:00:00","19:00:00",420,-1
159,"T63-15","Jueves","12:00:00","19:00:00",420,-1
159,"T63-15","Viernes","12:00:00","19:00:00",420,-1
160,"T65-15","Lunes","14:30:00","21:30:00",420,-1
160,"T65-15","Martes","14:30:00","21:30:00",420,-1
160,"T65-15","Miercoles","14:30:00","21:30:00",420,-1
160,"T65-15","Jueves","14:30:00","21:30:00",420,-1
160,"T65-15","Viernes","14:30:00","21:30:00",420,-1
162,"T66-15","Lunes","08:00:00","13:00:00",300,-1
162,"T66-15","Martes","08:00:00","13:00:00",300,-1
162,"T66-15","Miercoles","08:00:00","13:00:00",300,-1
162,"T66-15","Jueves","08:00:00","13:00:00",300,-1
162,"T66-15","Viernes","08:00:00","13:00:00",300,-1
163,"T67-15","Lunes","11:30:00","19:30:00",480,-1
163,"T67-15","Martes","11:30:00","19:30:00",480,-1
163,"T67-15","Miercoles","11:30:00","19:30:00",480,-1
163,"T67-15","Jueves","11:30:00","19:30:00",480,-1
163,"T67-15","Viernes","11:30:00","19:30:00",480,-1
111,"T9","Lunes","09:00:00","19:00:00",600,15
111,"T9","Martes","09:00:00","19:00:00",600,15
111,"T9","Miercoles","09:00:00","19:00:00",600,15
111,"T9","Jueves","09:00:00","19:00:00",600,15
111,"T9","Viernes","09:00:00","19:00:00",600,15
EOT;

        $lines = explode("\n", trim($csvData));

        foreach ($lines as $line) {
            $data = str_getcsv($line);

            // Ajusta los índices según las columnas de tu CSV real
            // Formato esperado: 0=id, 1=nombre, 2=dia, 3=entrada, 4=salida, 5=minutos_laborales, 6=tolerancia
            if (count($data) >= 7) {
                
                Schedule::updateOrCreate(
                    ['id' => $data[0]], // Buscamos por ID para no duplicar (usando un solo horario general)
                    [
                        'name' => $data[1],
                        'day_of_week' => $data[2], // Se guarda el último día (ej. Viernes), o puedes ignorarlo
                        'entry_time' => $data[3] ?? null,
                        'exit_time' => $data[4] ?? null,
                        'work_minutes' => $data[5] ?? 0, // Corregido: Minutos Laborales (Jornada)
                        'tolerance_minutes' => $data[6] ?? 0, // Corregido: Tolerancia Real
                    ]
                );
            }
        }
        
        // Volvemos a activar la protección al terminar
        Model::reguard();
    }
}